
<div class="container">

   <div class="row tombstone">
      <div class="col-xs-12">
         <h1><%= "#{@memorial.first_name} #{@memorial.last_name}" %></h1>
         <h2 title="<%= "#{@memorial.dob.to_formatted_s(:long_ordinal)} - #{@memorial.dod.to_formatted_s(:long_ordinal)}" %>"><%= "#{@memorial.dob.year} - #{@memorial.dod.year}" %></h2>
      </div>
   </div>

   <div class="posts-forms row">
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Message
      </button>
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Picture
      </button>
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-film" aria-hidden="true"></span> Video
      </button>
   </div>

      <% @memorial.posts.each do |post| %>
         <div class="col-xs-12 col-sm-6 col-md-4 well">
            <% if post.postable_type == "Text" %>
               <%= post.postable.try(:body) %>
            <% elsif post.postable_type == "Picture" %>
               <%= image_tag post.postable.image.url %>
            <% end %>
         </div>
      <% end %>
   </div>


   <!-- Modal -->
   <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
     <div class="modal-dialog" role="document">
       <div class="modal-content">
         <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
           <h4 class="modal-title" id="myModalLabel">Modal title</h4>
         </div>
         <div class="modal-body">
            
            <div class="posts row">
               <div class="col-xs-12 col-sm-6 col-md-4 well">
                  <%= form_for :text, url: texts_path do |f| %>
                     <p><%= f.text_area :body %></p><br>
                     <p><%= f.hidden_field :memorial_id, value: @memorial.id %></p>
                     <p><%= f.submit "Submit" %></p>
                  <% end %>
               </div>

               <div class="col-xs-12 col-sm-6 col-md-4 well">
                  <%= form_for Picture.new do |f| %>
                        <p><%= f.file_field :image %></p>
                        <p><%= f.hidden_field :memorial_id, value: @memorial.id %></p>
                        <p><%= f.submit "Submit" %></p>
                  <% end %>
               </div>

         </div>
         <div class="modal-footer">
           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
           <button type="button" class="btn btn-primary">Save changes</button>
         </div>
       </div>
     </div>
   </div>

</div>
