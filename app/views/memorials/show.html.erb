
<div class="container">
   <!-- <% pics = Array.new %>
   <% @memorial.posts.each do |post| %>
      <% if post.postable_type == "Picture" %>
         <% pics << post.postable.image.url %>
            <%= image_tag post.postable.image.url, :class => "tombstone-image"%>
      <% end %>
   <% end %> -->
   <% @pics.each do |pic| %>
      <% if pic.image.first %>
         <%= image_tag pic.image.url, :class => "tombstone-image"%>
      <% end %>
         <!-- <%= image_tag pic.image.url, :class => "tombstone-image"%> -->
   <% end %>
   <div class="row tombstone">
      <div class="col-xs-12">
         <h1><%= "#{@memorial.first_name} #{@memorial.last_name}" %></h1>
         <h2 title="<%= "#{@memorial.dob.to_formatted_s(:long_ordinal)} - #{@memorial.dod.to_formatted_s(:long_ordinal)}" %>"><%= "#{@memorial.dob.year} - #{@memorial.dod.year}" %></h2>
      </div>
   </div>

   <div class="posts-forms row">
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary btn-lg texts-button" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Write a Message
      </button>
      <button type="button" class="btn btn-primary btn-lg pictures-button" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Leave a Picture
      </button>
      <button type="button" class="btn btn-primary btn-lg videos-button" data-toggle="modal" data-target="#myModal">
        <span class="glyphicon glyphicon-film" aria-hidden="true"></span> Share a Video
      </button>
   </div>

   <div class="posts row">
      <% @memorial.posts.each do |post| %>
         <% if post.postable_type == "Text" %>
            <div class="col-xs-12 col-sm-6 col-md-4 post">
               <div class="panel panel-default">
                 <div class="panel-body">
                   <%= post.postable.try(:body) %>
                 </div>
                 <div class="panel-footer">Shared by: <%= post.user %></div>
               </div>
            </div>
         <% elsif post.postable_type == "Picture" %>
            <div class="col-xs-12 col-sm-6 col-md-4 post">
               <div class="panel panel-default">
                 <div class="panel-body">
                   <%= image_tag post.postable.image.feed.url %>
                 </div>
                 <div class="panel-footer">Shared by: <%= post.user %></div>
               </div>
            </div>
         <% end %>
      <% end %>
   </div>


   <!-- Modal -->
   <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
     <div class="modal-dialog" role="document">
       <div class="modal-content">
         <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
           <h4 class="modal-title" id="myModalLabel">Modal title</h4>
         </div>
         <div class="modal-body">

               <!-- <div class="col-xs-12 col-sm-6 col-md-4 well"> -->
               <div class="texts-form">
                  <%= form_for :text, url: texts_path do |f| %>
                     <p><%= f.text_area :body %></p><br>
                     <p><%= f.hidden_field :memorial_id, value: @memorial.id %></p>
                     <p><%= f.submit "Submit" %></p>
                  <% end %>
               </div>

               <!-- <div class="col-xs-12 col-sm-6 col-md-4 well"> -->
               <div class="pictures-form">
                  <%= form_for Picture.new do |f| %>
                        <p><%= f.file_field :image %></p>
                        <p><%= f.hidden_field :memorial_id, value: @memorial.id %></p>
                        <p><%= f.submit "Submit" %></p>
                  <% end %>
               </div>

         </div>
         <div class="modal-footer">
           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
           <button type="button" class="btn btn-primary">Save changes</button>
         </div>
       </div>
     </div>
   </div>

</div>
